"use strict";window.mobilecheck=function(){var t,i=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i};var game=function(){var t={},i=document.getElementById("canvas"),s=i.getContext("2d");s.imageSmoothingEnabled=!1;var o=i.width/innerWidth,e=0,h=0;function n(){i.width/i.height>=innerWidth/innerHeight?(i.style.height="",i.style.width="100vw",o=i.width/innerWidth):(i.style.height="100vh",i.style.width="",o=i.height/innerHeight)}function a(t,i){for(var s=0;s<t.length;s++)if(t[s].toLowerCase()===i.toLowerCase())return s;return-1}function r(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t))+t}function l(t,i){if(t.length!==i.length)return!1;for(var s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}function d(t,i,s,o,e,h,n,a){return t<e+n&&t+s>e&&i<h+a&&i+o>h}function u(t){for(var i,s=0;s<t.length;s++){var o=r(s,t.length);i=t[o],t[o]=t[s],t[s]=i}}var c,g=function(){var t,i={SOUND_CLICK:0,SOUND_HOVER:1,SOUND_DROP:2,SOUND_LOCKS:3,SOUND_PASS:4,SOUND_SWEEP:5,SOUND_DEATH:6,SOUND_LASER:7},s=.1,o=.05,e=.025,h=!1,n=!1,a=!1,l=[["sounds/button.wav"],["sounds/hover.wav"],["sounds/drop1.wav","sounds/drop2.wav","sounds/drop3.wav"],["sounds/locks1.wav","sounds/locks2.wav","sounds/locks3.wav"],["sounds/pass1.wav","sounds/pass2.wav","sounds/pass3.wav"],["sounds/sweep1.wav","sounds/sweep2.wav","sounds/sweep3.wav"],["sounds/death.wav"],["sounds/laser.wav"]],d=[],u="sounds/tempMusic.wav";function c(t){var i=r(0,d[t].length);return d[t][i]}return i.playSound=function(t){var i=c(t);i.currentTime=0,i.play()},i.playMusic=function(){t.play()},i.stopMusic=function(){t.pause(),t.currentTime=0},i.getHasLoaded=function(){if(h)return!0;var i=!0;t.avail||(i=!1);for(var s=0;s<d.length&&i;s++)for(var o=0;o<l[s].length;o++)d[s][o].avail||(i=!1);return h=i},i.loadSounds=function(){for(var i=0;i<l.length;i++){d[i]=[];for(var e=0;e<l[i].length;e++)d[i][e]=new Audio,d[i][e].src=l[i][e],d[i][e].volume=s,d[i][e].avail=!1,d[i][e].oncanplaythrough=function(){this.avail=!0}}(t=new Audio).src=u,t.volume=o,t.loop=!0,t.avail=!1,t.oncanplaythrough=function(){this.avail=!0}},i.getSound=c,i.toggleMuteSound=function(t){if(t)for(var i=0;i<d.length;i++)for(var o=0;o<l[i].length;o++)d[i][o].volume=0;else for(i=0;i<d.length;i++)for(o=0;o<l[i].length;o++)d[i][o].volume=s;n=t,localStorage.setItem("soundMuted",t.toString())},i.getSoundMuted=function(){return n},i.toggleMuteMusic=function(i){i?t.volume=0:w.getCurrentScreen()===w.SCREEN_PAUSE?t.volume=e:t.volume=o,a=i,localStorage.setItem("musicMuted",i.toString())},i.getMusicMuted=function(){return a},i}(),f=function(){var t={FROG:0,JANNY:1,LOCK:2,ALPHABET:3,ALPHABET_INVERTED:4,ALPHABET_RED:5,MOUSE:6,SHIT:7,THREADS:8,BANNER:9,BOARD_TITLE:10,RANGE_BAN:11,SOUND_BUTTON:12,MUSIC_BUTTON:13},i=!1,s=["images/frog.png","images/janny.png","images/lock.png","images/alphabet.png","images/alphabet_inverted.png","images/alphabet_red.png","images/sticky.png","images/shit.png","images/threads.png","images/banner.png","images/board_title.png","images/range_ban.png","images/sound_icon.png","images/music_icon.png"],o=[];return t.getHasLoaded=function(){if(i)return!0;for(var t=!0,s=0;s<o.length&&t;s++)o[s].avail||(t=!1);return i=t},t.loadImages=function(){for(var t=0;t<s.length;t++)o[t]=new Image,o[t].src=s[t],o[t].avail=!1,o[t].onload=function(){this.avail=!0}},t.getImage=function(t){return o[t]},t}(),m=function(){var t={},i="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-=[]\\;',./!@#$%^&*()_+{}|:\"<>? ",s=8,o=8,e=8;function h(t,h,n,a,r,l){var d=i.indexOf(h.toUpperCase());if(-1!==d){var u=d%s,c=Math.floor(d/s),g=f.getImage(l);t.drawImage(g,o*u,e*c,o,e,n,a,r,r)}}return t.drawText=function(t,i,s,o,e,n,a){var r=Math.floor(o),l=Math.floor(e),d=Math.floor(n);t.save(),t.globalAlpha=a;for(var u=0;u<i.length;u++)h(t,i.substring(u,u+1),r+u*d,l,d,s);t.restore()},t}(),p=function(){var t={POPUP_NORMAL:0,POPUP_RAGE:1,POPUP_CLEANED:2,POPUP_PASSED:3},i=[["based and redpilled","stickied!?","*dab*","okay, this is epic","moooods!","he cute!","clean it up!","*ahem*","eat shit janny!"],["SEETHING!","JANNY BTFO!","HOLY SHIT!"],["This thread has been pruned or deleted"],["Archived and screencapped."]];var s=[];return t.randomPopup=function(t){return i[t][r(0,i[t].length)]},t.setUpPopups=function(){s=[]},t.addPopup=function(t,i,o,e,h,n){s.push(new function(t,i,s,o,e,h){this.completeDuration=h,this.duration=0,this.string=s,this.x=t,this.y=i,this.size=o,this.imgVal=e,this.draw=function(t){m.drawText(t,this.string,this.imgVal,this.x,i,this.size,1-this.duration/this.completeDuration)},this.update=function(){this.duration+=M}}(t,i,o,e,h,n))},t.update=function(){for(var t=0;t<s.length;t++)s[t].update(),s[t].duration>s[t].completeDuration&&(i=s[t],-1!==(o=s.indexOf(i))&&s.splice(o,1),t--);var i,o},t.draw=function(t){for(var i=0;i<s.length;i++)s[i].draw(t)},t}(),P=function(){var t,s,o,n,a,c,P={},y=0,x=5,B=[0,20,i.width,i.height-20],S=B[2]/x,E=1,k=B[1]+240,C=B[1]+B[3]-200,T=8,A=1,O=160,L=1e3,b=3*S/O,R=1.5*S/O,N=0,_=.2;function D(){return 15*(1+Math.log(1/Math.E+(E+A-2))+1)*t/o.durationBetweenShits}function I(){return 15*(1+(E+A-2)*_)}var H,U=0;function F(t,i){var s=new function(t,i){this.sprite=f.getImage(f.SHIT),this.youLevel=0,this.width=52,this.height=36,this.sWidth=26,this.sHeight=18,this.collisionBox=[0,0,52,36],this.jannyHasCleaned=!1,this.doNotClean=!1,this.xPosition=t-this.width/2,this.yPosition=Math.floor(i-this.height/2)-y%1,this.draw=function(t){t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition),this.width,this.height)},this.update=function(t){this.xPosition;var i,s,o,e,a=this.yPosition;this.yPosition-=t;for(var r=0;r<E;r++){var l=k+r*(C-k)/T;a+this.collisionBox[1]>l&&this.yPosition+this.collisionBox[1]<=l&&(this.youLevel++,h+=Math.pow(this.youLevel,2)*A,n.isRagie?p.addPopup(16,l,p.randomPopup(p.POPUP_RAGE),16,f.ALPHABET,1):p.addPopup(16,l,p.randomPopup(p.POPUP_NORMAL),16,f.ALPHABET,1))}if(n.isRagie){var u=!1;if(d(this.xPosition+this.collisionBox[0],this.yPosition+this.collisionBox[1],this.collisionBox[2],this.collisionBox[3],n.xPosition+n.collisionBox[0],n.yPosition+n.collisionBox[1],n.collisionBox[2],n.collisionBox[3])?u=!0:a>=n.yPosition+n.collisionBox[1]+n.collisionBox[3]&&this.yPosition<=n.yPosition+n.collisionBox[1]+n.collisionBox[3]&&(i=this.xPosition+this.collisionBox[0],s=this.collisionBox[2],o=n.xPosition+n.collisionBox[0],e=n.collisionBox[2],i<o+e&&i+s>o&&(u=!0)),u){var c=p.randomPopup(p.POPUP_CLEANED),m=Math.min(B[0]+B[2]-10*c.length,Math.max(0,this.xPosition+this.width-10*c.length/2));p.addPopup(m,n.yPosition+n.height-this.height,c,10,f.ALPHABET_RED,1),W(this),g.playSound(g.SOUND_SWEEP)}}this.yPosition<=B[1]&&(this.youLevel++,h+=Math.pow(2,this.youLevel)*A,c=p.randomPopup(p.POPUP_PASSED),m=Math.min(B[0]+B[2]-10*c.length,Math.max(0,this.xPosition+this.width-10*c.length/2)),p.addPopup(m,B[1]+this.height,c,10,f.ALPHABET,1),W(this)),this.jannyHasCleaned&&(W(this),n.isRagie||U++,c=p.randomPopup(p.POPUP_CLEANED),m=Math.min(B[0]+B[2]-10*c.length,Math.max(0,this.xPosition+this.width-10*c.length/2)),p.addPopup(m,n.yPosition+n.height-this.height,c,10,f.ALPHABET_RED,1),g.playSound(g.SOUND_SWEEP))}}(t,i);a.push(s)}function W(t){var i=a.indexOf(t);-1!==i&&a.splice(i,1)}var V=function(){var e,h,a,d,c,m,p={},P=0,w=5,v=S/O,x=B[1]+Math.floor(i.height/S)*S-y,C=!1,T=.5,L=.3,b=!1,R=!0,N=0;function _(){return m>=1&&15*(1+Math.log(1/Math.E+(E+A-2))+1)*(H-U)/H>s&&(m%=1,!0)}function D(){var i,s,o;N>=1?N--:(s=C?w-1-P:P,R?(i=1,Math.random()<T&&(C=!C),R=!1,o=P):b?(i=1,C=!C,b=!1,o=P):((i=r(2,Math.min(2+s,w)))>2&&Math.random()<L?R=!0:i===s+1&&(b=!0),C?(o=P,P=R?o+i-2:o+i-1):(o=P-(i-1),P=R?o+1:o)),N+=.5*((t-O)/O),d=i,c=o,g.playSound(g.SOUND_LOCKS));var e=x+S;x=e;for(var h=0;h<c;h++)V(h*S,e);for(h=c+d;h<w;h++)V(h*S,e)}var I,F=[];function W(t,i){this.sprite=f.getImage(f.LOCK),this.width=78,this.height=90,this.sWidth=13,this.sHeight=15,this.collisionBox=[0,6,78,78],this.xPosition=t+5+6,this.yPosition=i+5,this.track=t/S,this.draw=function(t){t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition),this.width,this.height)},this.update=function(t){var i,s;this.yPosition-=t,this.yPosition+this.collisionBox[1]+this.collisionBox[3]<B[1]&&(i=this,-1!==(s=e.indexOf(i))&&e.splice(s,1))}}function V(t,i){var s,o=new W(t,i);e.push(o),s=new function(){this.sprite=f.getImage(f.LOCK),this.width=65,this.height=85,this.sWidth=13,this.sHeight=17,this.collisionBox=[0,0,78,90],this.xPosition=n.xPosition+n.width/2,this.yPosition=n.yPosition+n.height/2-this.height,this.isMovingLeft=Math.random()<.5,this.framePercent=Math.random(),this.aniFrame=0,this.maxFrame=1,this.frameTime=.5,this.isMovingLeft&&(this.xPosition-=this.width);this.xPosition+=r(-10,21),this.draw=function(t){t.drawImage(this.sprite,this.sWidth*(1+this.aniFrame),0,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition-5*this.aniFrame),this.width,this.height)},this.update=function(t){var i=t/S*(B[2]+this.width)/2;for(this.framePercent+=M/this.frameTime;this.framePercent>=1;)this.framePercent-=1,this.aniFrame++,this.aniFrame>this.maxFrame&&(this.aniFrame=0);this.isMovingLeft?this.xPosition-=i:this.xPosition+=i,this.xPosition>B[0]+B[2]&&K(this),this.xPosition+this.collisionBox[1]+this.collisionBox[3]<B[0]&&K(this)}},h.push(s)}function K(t){var i=h.indexOf(t);-1!==i&&h.splice(i,1)}return p.update=function(r){a.update();for(var d=0;d<e.length;d++)(c=e[d]).update(r),e[d]!==c&&d--;for(d=0;d<h.length;d++){var c;(c=h[d]).update(r),h[d]!==c&&d--}if(x-=r,n.isRagie)for(I||(P=o.track,b=!1,R=!1,0===P?(b=!0,C=!1):P===w-1?(b=!0,C=!0):(R=!0,C=Math.random()<.5),x=Math.floor(t/O+1)*S+B[1]+Math.floor(i.height/S)*S-y,m=0);(x-(B[1]+B[3]))/t<=v;)D();else I&&(N=0),m+=M/s,_()&&function(){for(var s=Math.floor(t/O+2)*S+B[1]+Math.floor(i.height/S)*S-y,o=[],e=0;e<w;e++)o[e]=e<3;for(;l(o,F);)u(o);for(var h=0;h<o.length;h++)F[h]=o[h],o[h]&&V(h*S,s);g.playSound(g.SOUND_LOCKS)}();I=n.isRagie},p.drawLocks=function(t){for(var i=0;i<e.length;i++)e[i].draw(t)},p.drawJannyLocks=function(t){for(var i=0;i<h.length;i++)h[i].draw(t)},p.getRangeBan=function(){return a},p.setUp=function(){e=[],h=[],x=B[1]+Math.floor(i.height/S)*S-y,m=.9,N=0,I=!1,F=[],a=new function(){this.sprite=f.getImage(f.RANGE_BAN),this.active=!1,this.alpha=0,this.fadeDuration=1,this.pauseDuration=1,this.pauseAmount=0,this.mode=0,this.moveSpeed=120,this.width=975,this.height=14,this.sWidth=975,this.sHeight=14,this.offset=0,this.scrollSpeed=20,this.yTop=k-this.height-100,this.yBottom=B[1]+B[3]-this.height,this.ySpace=this.height+1.25*S,this.yBounds=[k,B[1]+B[3]-(S+this.height)-this.ySpace],this.topInPlace=!1,this.bottomInPlace=!1,this.yStart=0,this.yEnd=0,this.isMovingDown=!1,this.delay=r(6,9),this.update=function(){if(this.active&&n.isRagie&&(this.active=!1,this.mode=6,this.delay=r(2,5),g.playSound(g.SOUND_LASER)),3!==this.mode&&5!==this.mode&&(this.offset+=this.scrollSpeed*M,this.offset%=this.width),0===this.mode&&(n.isRagie||(this.delay-=M),this.delay<=0&&(this.mode=1,this.active=!0,this.yTop=k-this.height-100,this.yBottom=B[1]+B[3]-this.height,g.playSound(g.SOUND_LASER))),1===this.mode&&(this.alpha+=M/this.fadeDuration,this.alpha>=1)){this.alpha=1,this.mode=2,this.yStart=r(this.yBounds[0],this.yBounds[1]);var t,i=(this.yBounds[1]-this.yBounds[0])/2;this.yStart<this.yBounds[0]+(this.yBounds[1]-this.yBounds[0])/2?(t=r(i,this.yBounds[1]-this.yStart),this.isMovingDown=!0):(t=-r(i,this.yStart-this.yBounds[0]),this.isMovingDown=!1),this.yEnd=this.yStart+t,this.topInPlace=!1,this.bottomInPlace=!1}2===this.mode&&(this.topInPlace||(this.yTop+=this.moveSpeed*M,this.yTop>=this.yStart&&(this.yTop=this.yStart,this.topInPlace=!0)),this.bottomInPlace||(this.yBottom-=this.moveSpeed*M,this.yBottom<=this.yStart+this.ySpace&&(this.yBottom=this.yStart+this.ySpace,this.bottomInPlace=!0)),this.topInPlace&&this.bottomInPlace&&(this.mode=3,this.pauseAmount=0)),3===this.mode&&(this.pauseAmount+=M,this.pauseAmount>=this.pauseDuration&&(this.mode=4,this.pauseAmount=0)),4===this.mode&&(this.isMovingDown?(this.yTop+=.75*this.moveSpeed*M,this.yTop>=this.yEnd&&(this.yTop=this.yEnd,this.mode=5,this.delay=r(7,10)),this.yBottom=this.yTop+this.ySpace):(this.yTop-=.75*this.moveSpeed*M,this.yTop<=this.yEnd&&(this.yTop=this.yEnd,this.mode=5,this.delay=r(7,10)),this.yBottom=this.yTop+this.ySpace)),5===this.mode&&(this.pauseAmount+=M,this.pauseAmount>=this.pauseDuration&&(this.mode=6,this.pauseAmount=0,this.active=!1,g.playSound(g.SOUND_LASER))),6===this.mode&&(this.alpha-=M/this.fadeDuration,this.alpha<=0&&(this.alpha=0,this.mode=0))},this.draw=function(t){for(var i=Math.ceil(B[2]/this.width)+1,s=0;s<i;s++)t.save(),t.globalAlpha=""+this.alpha,t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,s*this.width-this.offset,this.yTop,this.width,this.height),t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,s*this.width-(this.width-this.offset),this.yBottom,this.width,this.height),t.restore()}}},p.getLocks=function(){return e},p}(),K=function(){var i,s={},o=S/O,e=B[1]+y;function h(t,s){this.sprite=f.getImage(f.THREADS),this.width=S,this.height=S,this.sWidth=50,this.sHeight=50,this.collisionBox=[0,0,S,S],this.xPosition=t,this.yPosition=s,this.sX=r(0,10)*this.sWidth,this.sY=r(0,4)*this.sHeight,this.draw=function(t){t.drawImage(this.sprite,this.sX,this.sY,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition),this.width,this.height)},this.update=function(t){var s,o;this.yPosition-=t,this.yPosition+this.collisionBox[1]+this.collisionBox[3]<B[1]&&(s=this,-1!==(o=i.indexOf(s))&&i.splice(o,1))}}function n(){var t,s=e+S;e=s;for(var o=0;o<x;o++)void 0,t=new h(o*S,s),i.push(t)}return s.update=function(s){for(var h=0;h<i.length;h++){var a=i[h];a.update(s),i[h]!=a&&h--}for(e-=s;(e-(B[1]+B[3]))/t<=o;)n()},s.draw=function(t){for(var s=0;s<i.length;s++)i[s].draw(t)},s.setUp=function(){i=[],e=B[1]+y+1*S},s}(),Y=function(){var t,s,e,h={};return h.update=function(i){if(c&&(o.updateCinematic(i),n.updateCinematic(120*M),o.yPosition>n.yPosition&&(n.isLookingToRight=!0)),c&&o.yPosition+o.getCollisionBox()[1]>k+(C-k)/T){c=!1;var s=o.xPosition+o.width/2,e=o.yPosition+o.getCollisionBox()[1]-o.getCollisionBox()[3];F(s+=r(-20,20),e)}!c&&t<400&&(t+=i)},h.draw=function(o){o.save(),o.translate(0,-t),s.draw(o),e.draw(o),o.beginPath(),o.moveTo(20,196),o.lineTo(i.width-20,196),o.moveTo(20,240),o.lineTo(i.width-20,240),o.stroke(),o.restore()},h.setUp=function(){s=new function(){this.sprite=f.getImage(f.BANNER),this.youLevel=0,this.width=304,this.height=104,this.sWidth=152,this.sHeight=52,this.xPosition=i.width/2-this.width/2,this.yPosition=50,this.draw=function(t){t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,this.xPosition,this.yPosition,this.width,this.height)}},e=new function(){this.sprite=f.getImage(f.BOARD_TITLE),this.youLevel=0,this.width=276,this.height=68,this.sWidth=138,this.sHeight=34,this.xPosition=i.width/2-this.width/2,this.yPosition=160,this.draw=function(t){t.drawImage(this.sprite,0,0,this.sWidth,this.sHeight,this.xPosition,this.yPosition,this.width,this.height)}},t=0},h.getOffSet=function(){return t},h}();return P.update=function(){var i=N;if(U>=H&&(E<T?E++:A++,s=b-t/L*(b-R),t=Math.min(L,O*(1+(E+A-2)*_)),n.isRagie=!0,U=0,H=D()),o.isDead){if(o.deadCounter++,o.deadCounter>=o.deadCounterMax)return h>e&&(e=h,!isNaN(e)&&isFinite(e)?localStorage.setItem("highscore",e.toString()):e=0),g.stopMusic(),w.SCREEN_GAME_OVER}else{if(v.getKeyPresses(v.PAUSE)>=1)return w.SCREEN_PAUSE;var r;if(c)r=t*M,K.update(0),Y.update(r),p.update();else{y+=r=t*M,y%=S,Y.update(r);for(var l=0;l<a.length;l++){var d=a[l];a[l].update(r),a[l]!==d&&l--}V.update(r),o.update(r),n.update(r),K.update(r),p.update()}}return i},P.draw=function(t){t.save(),t.fillStyle="#e6eafa",t.fillRect(B[0],B[1],B[2],B[3]),t.fillStyle="#d6daf0",Y.getOffSet()<400&&Y.draw(t),K.draw(t),V.drawLocks(t);for(var s=0;s<a.length;s++)a[s].draw(t);for(V.drawJannyLocks(t),V.getRangeBan().draw(t),n.draw(t),o.draw(t),p.draw(t),s=0;s<E;s++)m.drawText(t,"> ",f.ALPHABET,0,k+s*(C-k)/T,16,1);var e;(e=t).fillStyle="#777777",e.fillRect(0,0,i.width,20),e.fillStyle="#444444",e.fillRect(2,3,52,14),e.fillStyle="#7c572a",e.fillRect(3,5,50*Math.min(1,o.shitChargePercent),11),e.fillStyle="#444444",e.fillRect(56,3,52,14),e.fillStyle="#ef7fa4",n.isRagie?e.fillRect(57,5,50*Math.max(0,1-n.ragiePercent),11):e.fillRect(57,5,50*Math.min(1,U/H),11),m.drawText(e,"x"+A,f.ALPHABET,110,5,10,1),m.drawText(e,"Score: "+h,f.ALPHABET,160,5,10,1),t.restore()},P.setUpObjects=function(){y=50,h=0,E=1,A=1,s=b,c=!0,t=O,Y.setUp(),o=new function(){this.track=2,this.sprite=f.getImage(f.FROG),this.walkFrame=6,this.maxFrame=5,this.sprintSpeed=120,this.shitting=!1,this.durationBetweenShits=120,this.shitChargePercent=0,this.isDead=!1,this.framePercent=0,this.pixelsPerFrame=14,this.getCollisionBox=function(){return 0===this.walkFrame?[20,170,64,18]:1===this.walkFrame?[20,172,64,16]:2===this.walkFrame?[20,174,64,28]:3===this.walkFrame?[20,178,64,16]:4===this.walkFrame?[20,174,64,18]:5===this.walkFrame?[20,176,64,28]:[20,180,64,18]},this.width=104,this.height=208,this.sWidth=52,this.sHeight=104,this.yPosition=-this.height,this.xPosition=S/2-this.width/2+S*this.track,this.deadCounter=0,this.deadCounterMax=120,this.deadFlashes=6,this.prevSetNumber=0,this.draw=function(t){var i=0;this.isDead&&(Math.floor(this.deadCounter/this.deadCounterMax*this.deadFlashes)%2==0?(0===this.prevSetNumber&&g.playSound(g.SOUND_DEATH),i=1):i=0,this.prevSetNumber=i),t.drawImage(this.sprite,this.sWidth*this.walkFrame,i*this.sHeight,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition),this.width,this.height)},this.update=function(t){var i=v.getKeyPresses(v.MOVE_RIGHT)-v.getKeyPresses(v.MOVE_LEFT);(v.getKeyPresses(v.MOVE_STOP)>0||v.getKeyState(v.MOVE_STOP))&&(i*=2),this.track+=i,this.track>x-1&&(this.track=x-1),this.track<0&&(this.track=0);var s=this.xPosition;if(this.xPosition=S/2-this.width/2+S*this.track,this.checkLockCollision(s),this.checkRangeBanCollision(),!this.isDead){var o=this.yPosition;v.getKeyPresses(v.MOVE_STOP)>0||v.getKeyState(v.MOVE_STOP)?(this.yPosition-=t,this.yPosition=Math.ceil(this.yPosition)-y%1):v.getKeyPresses(v.MOVE_UP)>0||v.getKeyState(v.MOVE_UP)?this.yPosition-=this.sprintSpeed*M:(v.getKeyPresses(v.MOVE_DOWN)>0||v.getKeyState(v.MOVE_DOWN))&&(this.yPosition+=this.sprintSpeed*M),this.yPosition<B[1]&&(this.yPosition=B[1]),this.yPosition+this.getCollisionBox()[1]+this.getCollisionBox()[3]>B[1]+B[3]&&(this.yPosition=B[1]+B[3]-this.getCollisionBox()[1]-this.getCollisionBox()[3]);var e=this.yPosition-o+t;if(e<.05&&e>-.05)this.walkFrame=6;else{for(;this.shitChargePercent>=1;){this.shitChargePercent-=1;var h=this.xPosition+this.width/2,a=this.yPosition+this.getCollisionBox()[1]-this.getCollisionBox()[3];F(h+=r(-20,20),a),g.playSound(g.SOUND_DROP)}var l=Math.max(0,e/this.pixelsPerFrame),u=Math.max(0,e/this.durationBetweenShits);for(this.framePercent+=l,this.shitChargePercent+=u;this.framePercent>=1;)this.framePercent-=1,this.walkFrame++,this.walkFrame>this.maxFrame&&(this.walkFrame=0)}d(this.xPosition+this.getCollisionBox()[0],this.yPosition+this.getCollisionBox()[1],this.getCollisionBox()[2],this.getCollisionBox()[3],n.xPosition+n.collisionBox[0],n.yPosition+n.collisionBox[1],n.collisionBox[2],n.collisionBox[3])&&(this.isDead=!0,g.playSound(g.SOUND_DEATH))}},this.checkLockCollision=function(t){var i=V.getLocks(),s=[];s[1]=this.getCollisionBox()[1]+this.yPosition,s[3]=this.getCollisionBox()[3];var e,h,n=Math.min(t,this.xPosition),a=Math.abs(t-this.xPosition);s[0]=this.getCollisionBox()[0]+n,s[2]=this.getCollisionBox()[2]+a;for(var r=0;r<i.length;r++){var l=i[r];d(s[0],s[1],s[2],s[3],l.xPosition+l.collisionBox[0],l.yPosition+l.collisionBox[1],l.collisionBox[2],l.collisionBox[3])&&(a=t>this.xPosition?t-l.xPosition:l.xPosition-t,this.isDead?a<h&&(e=l):(this.isDead=!0,e=l),h=a)}o.isDead&&(o.xPosition=S/2-this.width/2+S*e.track)},this.checkRangeBanCollision=function(){var t=V.getRangeBan();if(t.active&&1!==t.mode){var i=this.yPosition+this.getCollisionBox()[1]<t.yTop+t.height,s=this.yPosition+this.getCollisionBox()[1]+this.getCollisionBox()[3]>t.yBottom;i?(this.yPosition+this.getCollisionBox()[1]+this.getCollisionBox()[3]<t.yTop&&(this.yPosition=t.yTop-(this.getCollisionBox()[1]+this.getCollisionBox()[3])),this.isDead=!0):s&&(this.yPosition+this.getCollisionBox()[1]>t.yBottom+t.height&&(this.yPosition=t.yBottom-this.getCollisionBox()[1]),this.isDead=!0)}},this.updateCinematic=function(t){this.yPosition,this.yPosition+=t,this.yPosition;var i=Math.max(0,t/this.pixelsPerFrame);for(this.framePercent+=i;this.framePercent>=1;)this.framePercent-=1,this.walkFrame++,this.walkFrame>this.maxFrame&&(this.walkFrame=0)}},n=new function(){this.sprite=f.getImage(f.JANNY),this.walkFrame=0,this.maxFrame=5,this.isRagie=!1,this.ragieTime=I(),this.ragiePercent=0,this.isLookingToRight=!1,this.sprintSpeed=120,this.framePercent=0,this.pixelsPerFrame=16,this.collisionBox=[10,190,80,40],this.width=104,this.height=248,this.sWidth=52,this.sHeight=124,this.yPosition=k-this.collisionBox[1]-this.collisionBox[3],this.xPosition=350,this.draw=function(t){var i=0;c||(i=2),this.isRagie&&(i=4),this.isLookingToRight&&i++,t.drawImage(this.sprite,this.sWidth*this.walkFrame,i*this.sHeight,this.sWidth,this.sHeight,Math.floor(this.xPosition),Math.floor(this.yPosition),this.width,this.height)},this.update=function(t){var i=this.yPosition,s=this.xPosition,e=!1;if(this.isRagie){this.ragiePercent+=M/this.ragieTime;var h=k+.625*E*(C-k)/T;for(this.yPosition+this.collisionBox[1]+this.collisionBox[3]<h&&(this.yPosition+=this.sprintSpeed*M),this.yPosition+this.collisionBox[1]+this.collisionBox[3]>h&&(this.yPosition=h-this.collisionBox[1]-this.collisionBox[3]),this.ragiePercent>=1&&(this.isRagie=!1,this.ragiePercent=0,this.ragieTime=I()),this.xPosition=o.xPosition+o.getCollisionBox()[0]-this.collisionBox[0]-this.collisionBox[2]/2+o.getCollisionBox()[2]/2,s>this.xPosition&&(this.isLookingToRight=!0),s<this.xPosition&&(this.isLookingToRight=!1),n=0;n<a.length;n++)!(r=a[n]).doNotClean&&r.yPosition+r.collisionBox[1]+r.collisionBox[3]<this.yPosition+this.collisionBox[1]&&(r.doNotClean=!0)}else{if(this.yPosition+this.collisionBox[1]+this.collisionBox[3]>k)this.yPosition-=t;else for(var n=0;n<a.length&&!e;n++){var r;!(r=a[n]).doNotClean&&r.yPosition+r.collisionBox[1]<=this.yPosition+this.collisionBox[1]+this.collisionBox[3]&&(this.xPosition=r.xPosition+r.collisionBox[0]-this.collisionBox[0]-this.collisionBox[2]/2+r.collisionBox[2]/2,r.jannyHasCleaned=!0,s>this.xPosition?this.isLookingToRight=!0:this.isLookingToRight=!1,e=!0)}this.yPosition+this.collisionBox[1]+this.collisionBox[3]<k&&(this.yPosition=k-this.collisionBox[1]-this.collisionBox[3])}o.yPosition+o.getCollisionBox()[1]<this.yPosition+this.collisionBox[1]&&(this.xPosition=o.xPosition+o.getCollisionBox()[0]-this.collisionBox[0]-this.collisionBox[2]/2+o.getCollisionBox()[2]/2,this.yPosition=o.yPosition+o.getCollisionBox()[1]-this.collisionBox[1]+o.getCollisionBox()[3]/2-this.collisionBox[3]/2,s>this.xPosition?this.isLookingToRight=!0:this.isLookingToRight=!1);var l=this.yPosition-i+t;l<.05&&l>-.05&&(this.walkFrame=6);var d=l/this.pixelsPerFrame;for(this.framePercent+=d;this.framePercent>=1;)this.framePercent-=1,this.walkFrame++,this.walkFrame>this.maxFrame&&(this.walkFrame=0)},this.updateCinematic=function(t){var i=this.yPosition,s=this.yPosition-i+t,o=Math.max(0,s/this.pixelsPerFrame);for(this.framePercent+=o;this.framePercent>=1;)this.framePercent-=1,this.walkFrame++,this.walkFrame>this.maxFrame&&(this.walkFrame=0)}},a=[],H=D(),U=0,p.setUpPopups(),V.setUp(),K.setUp()},P}(),w=function(){var t=0,s=1,o=2,n=3,a={SCREEN_PLAYING:0,SCREEN_MAIN_MENU:1,SCREEN_GAME_OVER:2,SCREEN_PAUSE:3},r=a.SCREEN_MAIN_MENU,l=function(t){this.color="#e6eafa",this.buttons=[],this.audioButtons=[],this.screenVal=t,this.addButton=function(t,i,s,o,e,h){this.buttons.push(new p(t,i,s,o,e,h))},this.addAudioButton=function(t){this.audioButtons.push(t)},this.update=function(){for(var t=this.screenVal,i=0;i<this.buttons.length;i++)if(this.buttons[i].checkClicked()){t=this.buttons[i].screenDestination;break}for(i=0;i<this.audioButtons.length;i++)this.audioButtons[i].checkClicked();return t},this.uniqueDraw=function(t){},this.draw=function(t){t.save(),t.fillStyle=this.color,t.fillRect(0,0,i.width,i.height),this.uniqueDraw(t);for(var s=0;s<this.buttons.length;s++)this.buttons[s].draw(t);for(s=0;s<this.audioButtons.length;s++)this.audioButtons[s].draw(t);t.drawImage(f.getImage(f.MOUSE),0,0,17,17,Math.floor(v.getMouseX()),Math.floor(v.getMouseY())-28,34,32),t.restore()}},u=function(t,i){this.x=t,this.y=i,this.width=102,this.height=102,this.sWidth=17,this.sHeight=17,this.checkClicked=function(){for(var t=!1,i=0;i<v.getClicks().length;i++)if(t=d(this.x,this.y,this.width,this.height,v.getClicks()[i][0],v.getClicks()[i][1],0,0)){g.playSound(g.SOUND_CLICK),g.toggleMuteSound(!g.getSoundMuted());break}return t},this.draw=function(t){var i=0;g.getSoundMuted()&&(i=this.sWidth),t.drawImage(f.getImage(f.SOUND_BUTTON),i,0,this.sWidth,this.sHeight,this.x,this.y,this.width,this.height)}},c=function(t,i){this.x=t,this.y=i,this.width=102,this.height=102,this.sWidth=17,this.sHeight=17,this.checkClicked=function(){for(var t=!1,i=0;i<v.getClicks().length;i++)if(t=d(this.x,this.y,this.width,this.height,v.getClicks()[i][0],v.getClicks()[i][1],0,0)){g.playSound(g.SOUND_CLICK),g.toggleMuteMusic(!g.getMusicMuted());break}return t},this.draw=function(t){var i=0;g.getMusicMuted()&&(i=this.sWidth),t.drawImage(f.getImage(f.MUSIC_BUTTON),i,0,this.sWidth,this.sHeight,this.x,this.y,this.width,this.height)}},p=function(t,i,s,o,e,h){this.color="#d6daf0",this.border="#000000",this.borderWidth=4,this.text=e,this.x=t,this.y=i,this.width=s,this.height=o,this.screenDestination=h,this.hovered=!1,this.checkClicked=function(){for(var t=!1,i=0;i<v.getClicks().length;i++)if(t=d(this.x,this.y,this.width,this.height,v.getClicks()[i][0],v.getClicks()[i][1],0,0)){g.playSound(g.SOUND_CLICK);break}return t},this.draw=function(e){e.fillStyle=this.color,e.fillRect(t,i,s,o);var h=this.width/this.text.length,n=.7;d(this.x,this.y,this.width,this.height,v.getMouseX(),v.getMouseY(),0,0)?(this.hovered||(this.hovered=!0,g.playSound(g.SOUND_HOVER)),n=1):this.hovered&&(this.hovered=!1),e.save(),e.globalAlpha=n,e.beginPath(),e.strokeStyle=this.border,e.lineWidth=""+this.borderWidth,e.rect(t+this.borderWidth/2,i+this.borderWidth/2,s-this.borderWidth/2,o-this.borderWidth/2),e.stroke(),e.restore(),m.drawText(e,this.text,f.ALPHABET,t,i+this.height/2-h/2,h,n)}},w=[];return w[t]=P,w[s]=new l(s),w[s].addButton(100,250,300,100," START ",t),w[s].addAudioButton(new u(108,400)),w[s].addAudioButton(new c(i.width-100-110,400)),w[s].uniqueDraw=function(t){t.fillStyle="#d6daf0",t.fillRect(40,40,420,150),m.drawText(t,"Clean it up... ",f.ALPHABET,46,50,30,1),m.drawText(t,"Janny!",f.ALPHABET,50,100,70,1),t.fillRect(0,i.height-50,i.width,50),m.drawText(t,"basedgame@gmail.com",f.ALPHABET,10,760,24,1)},w[o]=new l(o),w[o].addButton(40,150,420,100," CHANGE IP ",t),w[o].uniqueDraw=function(t){t.fillStyle="#d6daf0",t.fillRect(0,0,i.width,100),m.drawText(t,"YOU ARE BANNED ;_;",f.ALPHABET,28,40,26,1),t.fillRect(0,450,i.width,200),m.drawText(t,"score: "+h,f.ALPHABET,8,550,14,1),m.drawText(t,"High score: "+e,f.ALPHABET,8,570,14,1),m.drawText(t,"Janitor's compensation: $0.00",f.ALPHABET,8,590,14,1),t.drawImage(f.getImage(f.FROG),312,0,52,104,50,310,104,208),t.drawImage(f.getImage(f.JANNY),312,124,52,124,346,300,104,248)},w[n]=new l(n),w[n].addButton(40,200,420,100," continue ",t),w[n].addAudioButton(new u(108,400)),w[n].addAudioButton(new c(i.width-100-110,400)),w[n].uniqueDraw=function(t){t.fillStyle="#d6daf0",t.fillRect(0,0,i.width,100),m.drawText(t,"Paused",f.ALPHABET,46,10,70,1)},a.draw=function(t){w[r].draw(t)},a.update=function(){var i=r;r=w[r].update(),i!==s&&i!==o||r!==t||(P.setUpObjects(),g.playMusic()),i===n&&r===t&&g.toggleMuteMusic(g.getMusicMuted()),i===t&&r===n&&g.toggleMuteMusic(g.getMusicMuted())},a.getCurrentScreen=function(){return r},a}(),y=function(){var t={},s=[];function o(t){s.push(t)}return t.init=function(){document.addEventListener("keydown",o),document.addEventListener("keyup",o),i.addEventListener("mousedown",o),i.addEventListener("mouseup",o),i.addEventListener("mousemove",o),i.addEventListener("touchmove",o),addEventListener("resize",n),i.focus()},t.getInputs=function(){for(var t=[],i=0;i<s.length;i++)t[i]=s[i];return s=[],t},t}(),v=function(){var t={MOVE_DOWN:0,MOVE_UP:1,MOVE_STOP:2,MOVE_LEFT:3,MOVE_RIGHT:4,PAUSE:5},s=["s","w","Shift","a","d","Escape"],e=[!1,!1,!1,!1,!1,!1],h=[0,0,0,0,0,0],n=[],r=!1,l=[];return t.getKeyState=function(t){return e[t]},t.getKeyPresses=function(t){return h[t]},t.getClicking=function(){return r},t.getClicks=function(){return l},t.getMouseX=function(){return n[0]},t.getMouseY=function(){return n[1]},t.update=function(){!function(){for(var t=0;t<s.length;t++)h[t]=0;l=[]}();for(var t=y.getInputs(),d=0;d<t.length;d++){var u=t[d].type;if("keydown"===u)-1===(c=a(s,t[d].key))||e[c]||(h[c]++,e[c]=!0);else if("keyup"===u){var c;-1!==(c=a(s,t[d].key))&&(e[c]=!1)}else"mousedown"===u?0===t[d].button&&(n[0]=(t[d].clientX-i.offsetLeft)*o,n[1]=(t[d].clientY-i.offsetTop)*o,r=!0):"mouseup"===u?0===t[d].button&&(r&&(l.push([(t[d].clientX-i.offsetLeft)*o,(t[d].clientY-i.offsetTop)*o]),n[0]=(t[d].clientX-i.offsetLeft)*o,n[1]=(t[d].clientY-i.offsetTop)*o),r=!1):"mousemove"===u&&(n[0]=(t[d].clientX-i.offsetLeft)*o,n[1]=(t[d].clientY-i.offsetTop)*o)}},t}();function x(){var t=f.getHasLoaded(),i=g.getHasLoaded();return t&&i}var B=performance.now(),S=0,M=1/60;function E(){for(c=performance.now(),S+=Math.min(1,(c-B)/1e3);S>M;)S-=M,k();x()?w.draw(s):(s.fillStyle="#FFFFFF",s.font="80px Courier",s.fillText("Loading...",0,300)),B=c,requestAnimationFrame(E)}function k(){x()&&(v.update(),w.update())}return t.init=function(){var t=parseInt(localStorage.getItem("highscore"));!isNaN(t)&&isFinite(t)||(t=0),e=t,n(),f.loadImages(),g.loadSounds();var i=localStorage.getItem("soundMuted"),s=localStorage.getItem("musicMuted");"true"===i&&g.toggleMuteSound(!0),"true"===s&&g.toggleMuteMusic(!0),y.init(),requestAnimationFrame(E)},t}();game.init();